const Command = require('../../structures/Command');
const { MessageEmbed } = require('discord.js');
const DB = require('../../modules/DBManager');

class Invite extends Command {
	constructor(client) {
		super({
			name: 'invite',
			description: 'Returns a link to invite the bot.',
			usage: '',
			category: 'Utility',
			aliases: [],
			cooldown: 1,
			requiredPerms: 'READ_MESSAGES',
			enabled: true,
			ownerOnly: false,
			guildOnly: false,
			args: false,

		});

		this.client = client;
	}

	async exec(message) {

		const User = await DB.fetchUser(message.author.id);
		const langSet = User.language;
		const lang = require(`../../locales/${langSet}.json`);

		const embed = new MessageEmbed()

			.setThumbnail(this.client.user.displayAvatarURL())
			.setTitle(`${this.client.user.username} - ${lang.WORD_LINKS}`, this.client.user.displayAvatarURL())

			.setDescription(`:white_small_square: [${lang.INVITE_INVITE_BOT}](https://discordapp.com/oauth2/authorize?client_id=${this.client.user.id}&scope=bot&permissions=537250816)\n:white_small_square: [${lang.INVITE_SUPPORT_SERVER}](https://discord.gg/Sn92FSj)`)
			.setFooter(`${this.client.user.tag}`, this.client.user.displayAvatarURL())
			.setColor('#2f3136')
			.setTimestamp();
		return message.channel.send({ embeds: [embed] });
	}
}
module.exports = Invite;